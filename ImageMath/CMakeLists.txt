PROJECT(ImageMath)

CMAKE_MINIMUM_REQUIRED(VERSION 2.8)
CMAKE_POLICY(VERSION 2.8)

IF(CMAKE_COMPILER_2005)
  ADD_DEFINITIONS(-D_CRT_SECURE_NO_DEPRECATE -D_CRT_NONSTDC_NO_DEPRECATE)
ENDIF(CMAKE_COMPILER_2005)

FIND_PACKAGE(ITK 4 REQUIRED)
IF (ITK_FOUND)
   INCLUDE(${USE_ITK_FILE})
ELSE(ITK_FOUND)
   MESSAGE(FATAL_ERROR, "ITK not found. Please set ITK_DIR.")
ENDIF (ITK_FOUND)

IF( ${ITK_VERSION} VERSION_LESS 4.4.0 )
  MESSAGE( FATAL_ERROR "ImageMath needs ITKv4.4.0 or greater to compile" )
ENDIF()
if( ITKV3_COMPATIBILITY )
#  message(FATAL_ERROR "ImageMath: ITK needs to be compiled with ITKV3_COMPATIBILITY set to OFF")
endif()


ADD_EXECUTABLE(ImageMath ImageMath.cxx )
TARGET_LINK_LIBRARIES( ImageMath ${ITK_LIBRARIES} )

install( TARGETS ImageMath RUNTIME DESTINATION bin )
